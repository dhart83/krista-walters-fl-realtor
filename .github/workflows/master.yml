name: ðŸš€ Deploy website on push

on:
    push:
        branches: ['master']

jobs:
    web-deploy:
        name: ðŸŽ‰ Deploy
        runs-on: ubuntu-latest

        strategy:
            matrix:
                node-version: [18.x]

        steps:
            - uses: actions/checkout@v3

            - name: Use Node.js ${{ matrix.node-version }}
              uses: actions/setup-node@v3
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: 'npm'
                  cache-dependency-path: ./client/package-lock.json
            - run: npm install
              working-directory: client
            - run: npm run build --if-present
              working-directory: client

            # - name: ðŸšš Get latest code
            #   uses: actions/checkout@v3

            - name: ðŸ“‚ Sync files
              uses: ./client
              with:
                  server: ftp://donniehartman.com
                  username: ${{ secrets.ftp_username }}
                  password: ${{ secrets.ftp_password }}
                  local-dir: view/
# name: ðŸš€ Deploy on push

# on:
#   push:
#     branches:
#       - master

# jobs:
#   web-deploy:
#     name: ðŸŽ‰ Deploy
#     runs-on: ubuntu-latest

#     strategy:
#       matrix:
#         node-version: [18.x]

#     steps:
#     - name: ðŸšš Get latest code
#       uses: actions/checkout@v2

#     - name: Use Node.js ${{ matrix.node-version }}
#       uses: actions/setup-node@master
#       with:
#         node-version: ${{ matrix.node-version }}

#     - name: Copy .env.prod.example to .env
#       run: cp .env.prod.example .env

#     - name: ðŸ”¨ Build Project
#       run: |
#         npm install
#         npm run build

#     - name: List output files
#       run: find build/ -print

#     - name: ðŸ“‚ Sync files
#       uses: SamKirkland/FTP-Deploy-Action@4.3.3
#       with:
#         server: ${{ secrets.SERVER }}
#         username: ${{ secrets.FTP_USERNAME }}
#         password: ${{ secrets.FTP_PASSWORD }}
#         local-dir: build/
